diff -Nru cloog-0.18.0/isl/configure new_cloog-0.18.0/isl/configure
--- cloog-0.18.0/isl/configure	2012-12-20 18:22:46.000000000 +0100
+++ new_cloog-0.18.0/isl/configure	2014-03-21 13:02:56.751047137 +0100
@@ -17143,6 +17143,29 @@
   NEED_GET_MEMORY_FUNCTIONS_FALSE=
 fi
 
+ac_fn_c_check_decl "$LINENO" "ffs" "ac_cv_have_decl_ffs" "#include <strings.h>
+"
+if test "x$ac_cv_have_decl_ffs" = xyes; then :
+  ac_have_decl=1
+else
+  ac_have_decl=0
+fi
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL_FFS $ac_have_decl
+_ACEOF
+
+ac_fn_c_check_decl "$LINENO" "__builtin_ffs" "ac_cv_have_decl___builtin_ffs" "$ac_includes_default"
+if test "x$ac_cv_have_decl___builtin_ffs" = xyes; then :
+  ac_have_decl=1
+else
+  ac_have_decl=0
+fi
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL___BUILTIN_FFS $ac_have_decl
+_ACEOF
+
 
 
 
diff -Nru cloog-0.18.0/isl/configure.ac new_cloog-0.18.0/isl/configure.ac
--- cloog-0.18.0/isl/configure.ac	2012-12-20 18:22:23.000000000 +0100
+++ new_cloog-0.18.0/isl/configure.ac	2014-03-21 13:02:56.751047137 +0100
@@ -62,6 +62,8 @@
 ],[#include <gmp.h>])
 CPPFLAGS="$SAVE_CPPFLAGS"
 AM_CONDITIONAL(NEED_GET_MEMORY_FUNCTIONS, test x$need_get_memory_functions = xtrue)
+AC_CHECK_DECLS(ffs,[],[],[#include <strings.h>])
+AC_CHECK_DECLS(__builtin_ffs,[],[],[])
 
 AX_SUBMODULE(piplib,no|system|build,no)
 
diff -Nru cloog-0.18.0/isl/isl_config.h.in new_cloog-0.18.0/isl/isl_config.h.in
--- cloog-0.18.0/isl/isl_config.h.in	2012-12-20 18:22:46.000000000 +0100
+++ new_cloog-0.18.0/isl/isl_config.h.in	2014-03-21 13:02:56.751047137 +0100
@@ -19,10 +19,17 @@
 /* Define if Driver constructor takes CXXIsProduction argument */
 #undef HAVE_CXXISPRODUCTION
 
+/* Define to 1 if you have the declaration of `ffs', and to 0 if you don't. */
+#undef HAVE_DECL_FFS
+
 /* Define to 1 if you have the declaration of `mp_get_memory_functions', and
    to 0 if you don't. */
 #undef HAVE_DECL_MP_GET_MEMORY_FUNCTIONS
 
+/* Define to 1 if you have the declaration of `__builtin_ffs', and to 0 if you
+   don't. */
+#undef HAVE_DECL___BUILTIN_FFS
+
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H
 
diff -Nru cloog-0.18.0/isl/isl_config_post.h new_cloog-0.18.0/isl/isl_config_post.h
--- cloog-0.18.0/isl/isl_config_post.h	2012-12-20 18:22:23.000000000 +0100
+++ new_cloog-0.18.0/isl/isl_config_post.h	2014-03-21 13:02:56.751047137 +0100
@@ -1,3 +1,7 @@
 #ifndef HAVE___ATTRIBUTE__
 #define __attribute__(x)
 #endif
+
+#if (HAVE_DECL_FFS==0) && (HAVE_DECL___BUILTIN_FFS==1)
+# define ffs __builtin_ffs
+#endif
diff -Nru cloog-0.18.0/isl/isl_hash.c new_cloog-0.18.0/isl/isl_hash.c
--- cloog-0.18.0/isl/isl_hash.c	2012-12-20 18:22:23.000000000 +0100
+++ new_cloog-0.18.0/isl/isl_hash.c	2014-03-21 13:02:56.755047137 +0100
@@ -11,6 +11,7 @@
 #include <strings.h>
 #include <isl/hash.h>
 #include <isl/ctx.h>
+#include "isl_config.h"
 
 uint32_t isl_hash_string(uint32_t hash, const char *s)
 {
--- cloog-0.18.0/isl/isl_map_simplify.c	2012-12-20 17:22:23 +0000
+++ new_cloog-0.18.0/isl/isl_map_simplify.c	2014-03-21 13:42:22 +0000
@@ -18,6 +18,7 @@
 #include "isl_tab.h"
 #include <isl_space_private.h>
 #include <isl_mat_private.h>
+#include "isl_config.h"
 
 static void swap_equality(struct isl_basic_map *bmap, int a, int b)
 {
